<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta property="og:title" content="SGI서울보증"> 
    <meta property="og:image" content="https://i.ibb.co/GkcG4Ft/meta.png">
    <meta property="og:description" content="SGI서울보증">
    <link rel="icon" href="images/favicon.png">
    <title>회원정보 | SGI서울보증</title>
    <link rel="stylesheet" href="styles.css?v=1">
</head>
<body>
    <div class="mobile-container">

<!-- 로딩 화면 -->
<div id="loading-overlay">
    <div class="loading-container">
        <img src="images/SGI_Loading.png" alt="로고" class="loading-logo"> <!-- 고정된 로고 -->
        <div class="loading-spinner"></div> <!-- 회전하는 스피너 -->
    </div>
</div>

        <!-- 컴패니 헤더 시작 -->
        <header class="company-header">
            <div class="header-left">
                <a href="index.html" class="back-button">
                    <img src="images/gnb_btn_prev.png" alt="뒤로가기">
                </a>
            </div>
            <div class="header-center">
                <p class="header-text">회원 정보</p>
            </div>
            <div class="header-right">
                <a href="index.html" class="home-button">
                    <img src="images/ico_home_grey.png" alt="홈">
                </a>
            </div>
        </header>
        <!-- 컴패니 헤더 끝 -->

        <!-- 안내문 섹션 시작 -->
<section class="information-box">
    <ul>
        <li>아래 KSD 정보의 증권 및 기타 식별 정보를 무단으로 사용하거나 유포할 경우 법적으로 처벌받을 수 있습니다.</li>
        <li>전자등록을 권리로 하는 전자증권제도는 근거법률 
            (<a href="https://law.go.kr/LSW/lsSc.do?section=&menuId=1&subMenuId=15&tabMenuId=81&eventGubun=060101&query=%EC%A0%84%EC%9E%90%EC%A6%9D%EA%B6%8C%EB%B2%95" target="_blank">「주식·사채 등의 전자등록에 관한 법률」</a>)에 의거합니다.
        </li>
        <li><span style="font-weight: 600;">추가 문의 사항은 배정 담당자에게 연락 부탁드립니다.</span></li>
        
    </ul>
</section>
<!-- 안내문 섹션 끝 -->

<!-- 체크버튼 섹션 시작 -->
<section class="check-button-section">
    <p class="small-text"><span class="required">*</span> 필수 게시 항목</p>
    <hr class="divider">

    <p class="section-title">증권 구분 (자동)<span class="required"> *</span></p>
    <div class="radio-group">
        <label class="custom-radio">
            <input type="radio" name="save-type" value="insurance">
            <span class="radio-icon"></span> <span class="radio-text">보험증권</span>
        </label>
        <label class="custom-radio">
            <input type="radio" name="save-type" value="insurance-receipt" checked>
            <span class="radio-icon"></span> <span class="radio-text">증권보증증권</span>
        </label>
    </div>

    <p class="section-title">증권계약자 구분 (자동)<span class="required"> *</span></p>
    <div class="radio-group">
        <label class="custom-radio">
            <input type="radio" name="contractor-type" value="individual" checked>
            <span class="radio-icon"></span> <span class="radio-text">개인</span>
        </label>
        <label class="custom-radio">
            <input type="radio" name="contractor-type" value="corporation">
            <span class="radio-icon"></span> <span class="radio-text">법인 또는 기타 단체</span>
        </label>
    </div>
</section>
<!-- 체크버튼 섹션 끝 -->

<section class="account-info-box">
    <div class="info-item">
        <p class="info-title">성함 <span class="required">*</span></p>
        <p class="info-value" id="user-name"></p>
    </div>
    <div class="info-item">
        <p class="info-title">증권사 <span class="required">*</span></p>
        <p class="info-value" id="user-broker"></p>
    </div>
    <div class="info-item">
        <p class="info-title">증권 계좌 <span class="required">*</span></p>
        <p class="info-value" id="user-account"></p>
    </div>
    <div class="info-item">
        <p class="info-title">보유 주수 <span class="required">*</span></p>
        <p class="info-value" id="user-shares"></p>
    </div>
    <div class="info-item">
        <p class="info-title">총 평가 금액 <span class="required">*</span></p>
        <p class="info-value" id="total-value"></p>
    </div>    
</section>

<section class="logout-section">
    <button id="logout-button" class="logout-button">로그아웃</button>
    <p id="logout-message" class="logout-message hidden">로그아웃 중입니다···</p>
</section>

<!-- 옐로우 섹션 시작 -->
<section class="yellow-section-container">
    <div class="yellow-section" onclick="window.location.href='form.html';">
        <img src="images/service_guide_type1_1.png" alt="이미지 설명" class="yellow-section-image">
        <p class="yellow-section-title">증권 문의가 필요하신가요?</p>
        <p class="yellow-section-description">간단한 문의는 <b>문의기능</b>을 이용해보세요.</p>
    </div>
</section>
<!-- 옐로우 섹션 끝 -->


        <!-- 푸터 시작 -->
        <footer class="footer">
            <div class="footer-inner">
                <div class="footer-top">
                    <p class="footer-address">서울시 종로구 김상옥로 29 서울보증보험(주)</p>
                    <p class="footer-ceo">대표이사 <span style="font-weight: 600;">이명순</span>&nbsp;&nbsp;&nbsp;|&nbsp;&nbsp;&nbsp;사업자번호 <span style="font-weight: 600;">120-81-13002</span></p>
                    <p class="footer-eng">© Seoul Guarantee Insurance. All rights reserved.</p>
                </div>
                <div class="footer-bottom">
                    <div class="footer-icons">
                        <a href="https://www.youtube.com/c/sgictube" class="footer-icon" target="_blank">
                            <img src="images/sns_youtube.png" alt="Youtube">
                        </a>
                        <a href="https://www.instagram.com/sgic_official/#" class="footer-icon" target="_blank">
                            <img src="images/sns_instagram.png" alt="Instagram">
                        </a>
                        <a href="https://www.facebook.com/sgic.co.kr" class="footer-icon" target="_blank">
                            <img src="images/sns_facebook.png" alt="Facebook">
                        </a>
                    </div>
                    <div class="footer-image-wrapper">
                        <img src="images/web_acc.png" alt="Footer Image" class="footer-image">
                    </div>
                </div>
            </div>
        </footer>
        <!-- 푸터 끝 -->
    </div>

    <script>
        document.addEventListener("DOMContentLoaded", function () {
    setTimeout(() => {
        const loadingOverlay = document.getElementById("loading-overlay");
        loadingOverlay.style.opacity = "0"; // 페이드아웃 효과

        setTimeout(() => {
            loadingOverlay.style.display = "none"; // 로딩 화면 완전히 숨기기
        }, 800); // 0.8초 후 제거
    }, 1000); // 1초 동안 로딩 화면 유지
});

document.addEventListener("DOMContentLoaded", function () {
    // URL 해시에서 데이터를 추출 (먼저 decodeURIComponent 처리)
    const hash = window.location.hash.substring(1); // '#' 제거
    const decodedHash = decodeURIComponent(hash);
    console.log("Decoded Hash:", decodedHash);  // 복원된 Base64 문자열 확인

    if (decodedHash) {
        const decodedData = decodeBase64(decodedHash);
        console.log("Decoded Data:", decodedData);  // 디코딩된 JSON 문자열 확인

        try {
            const userData = JSON.parse(decodedData);
            console.log("User Data:", userData);  // 파싱된 JSON 데이터 확인

            // 받은 정보를 페이지에 표시
            document.getElementById("user-name").textContent = userData.name;
            document.getElementById("user-broker").textContent = userData.combo;
            document.getElementById("user-account").textContent = userData.account;
            document.getElementById("user-shares").textContent = 
    userData.sharesOwned.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",") + " 주";

            // 총 평가 금액 계산 및 포맷 (주식 가격 * 보유 주수)
            const stockPrice = parseFloat(userData.stockPrice);
            const sharesOwnedInt = parseInt(userData.sharesOwned, 10);
            if (!isNaN(stockPrice) && !isNaN(sharesOwnedInt)) {
                const totalValue = stockPrice * sharesOwnedInt;
                const formattedValue = formatCurrency(totalValue);
                document.getElementById("total-value").textContent = formattedValue;
            } else {
                console.error("Invalid data for stockPrice or sharesOwned.");
                document.getElementById("total-value").textContent = "정보 오류";
            }
        } catch (error) {
            console.error("Error parsing the data:", error);
        }
    }
});

// Base64 디코딩 함수
function decodeBase64(input) {
    try {
        return decodeURIComponent(escape(atob(input)));
    } catch (error) {
        console.error("Base64 decoding error:", error);
        return null;
    }
}

// 금액 형식화 함수 (단위 추가 및 쉼표 추가)
function formatCurrency(value) {
    return value.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",") + ' 원';
}

document.addEventListener("DOMContentLoaded", function () {
    const logoutButton = document.getElementById("logout-button");
    const logoutMessage = document.getElementById("logout-message");

    logoutButton.addEventListener("click", function () {
        // 로그아웃 중 메시지 표시
        logoutMessage.classList.remove('hidden');  // 'hidden' 클래스를 제거하여 메시지 표시
        logoutMessage.style.display = "block";     // 메시지 보이게 설정

        // 1초 후 index.html로 이동
        setTimeout(function() {
            window.location.href = "index.html";  // index.html로 이동
        }, 1000); // 1000ms = 1초
    });
});
    </script>
</body>
</html>
